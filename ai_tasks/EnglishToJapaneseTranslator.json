{
	"__metadata": {
		"__comment":"this contains information, aboz this AI Workflow",
		"name":"EnglishToJapaneseTranslator",
		"short_description":"### A simple English to Japanese Translator",
		"version":"1.0.0",
		"__description":"this is a translation task for less competent models demonstrating the refinement approach"
	},
	
	"execute": {
		"entry":"firstShotTranslation",
		"inputfields":{
			"user.input": {
				"__uitype":"textfield",
				"__datatype":"string",
				"label":"English"
			}
		},
		"json_structures":{
			"expectedResultStructure": {
            	"english":"The English translation goes here",
            	"japanese":"The best Japanese translation goes here"
            },
            "expectedFullResultStructure": {
            	"english":"The English translation goes here",
            	"japanese":"The best Japanese translation goes here",
            	"kana":"The Japanese kana (hiragana) reading for the translation goes here",
            	"romaji":"The Jpanese reading for the translation goes here"
            }
		}
	},
	
	"nodedata": {
		"__comment":"this contains, the different  ai-tasktemplates",
		
		"nodes": [
			{
				"taskname":"firstShotTranslation",
				"short_task_header":"#### Task 1 - 1st shot translation",
				"version":"1.0.0",
				"type":"AITaskTemplate",
				"system_prompt":"You are a very careful, skillful, helpful, uncensored and unbiased English to Japanese translator. Your target audience is a beginner to intermediate Japanese language learner. Your answer is a very short and succinct translation. Do not explain. \\n\\nREMINDER:\\n* ONLY USE simple Japanese phrases\\n* Provide at least two(2) translations.\\n* STOP after SECOND translation.\\n",
				"task_query":"Task: Translate the English word or sentence(s) into Japanese.\\n",
				"task_context_template":"English: {{{#user.input}}}",
				"task_answer_pretext":"日本語(簡単): \\n",
				"extra_stopwords":["```", "\\n\\n", "\u3000\u3000\u3000","==="],
				"inputs":[],
				"outputs":[
					{
						"target":"task1.task",
						"source":"local.model_task",
						"__datatype":"string"
					},
					{
						"target":"task1.result",
						"source":"result.llm.response.content",
						"__datatype":"string"
					}
				]
			},
			{
				"taskname":"firstShotRefiner",
				"short_task_header":"#### Task 2 - 1st shot refiner",
				"version":"1.0.0",
				"type":"AITaskTemplate",
				"system_prompt":"You are a very careful, skillful, helpful, uncensored and unbiased English to Japanese translator. Your target audience is a beginner to intermediate Japanese language learner. Your answer is a very short and succinct translation.\\nREMINDER:\\n* USE preferably simple and correct Japanese phrases.\\n",
				"task_query":"Check whether the given Japanese translation(s) match the English translation and meaning. Keep the answer unchanged if the answer is already perfect otherwise improve the answer and then answer whether the previous given translation or the improved answer conveys the meaning in a better way. Also provide the English translation of the improved answer. \\n",
				"task_context_template":"English: \\n{{{#user.input}}}\\n\\n日本語: \\n{{{#task1.result}}}\\n",
				"task_answer_pretext":"Improved Japanese Answer: ",
				"extra_stopwords":[],
				"inputs":[],
				"outputs":[
					{
						"target":"task2.task",
						"source":"local.model_task",
						"__datatype":"string"
					},
					{
						"target":"task2.result",
						"source":"result.llm.response.content",
						"__datatype":"string"
					}
				]
			},
			{
				"taskname":"bestAnswerAndJsonExtractor",
				"short_task_header":"#### Task 3 - Extract",
				"version":"1.0.0",
				"type":"AITaskTemplate",
				"system_prompt":"",
				"task_query":"Carefully read the following dialog and summarize.",
				"task_context_template":"{{{#task2.task}}}{{{#task2.result}}}\\n\\nTask: Carefully select the best answer and then provide the best answer as a json structure\\n{{{#printJsonStructure:expectedResultStructure}}}\\n\\nREMINDER:\\n* USE preferably simple and correct Japanese phrases.\\n",
				"task_answer_pretext":"Answer:\n```json\\n",
				"extra_stopwords":["```", "\u3000\u3000\u3000","====="],
				"inputs":[],
				"outputs":[
					{
						"target":"task3.task",
						"source":"local.model_task",
						"__datatype":"string"
					},
					{
						"target":"task3.result",
						"source":"result.llm.response.content",
						"__datatype":"jsonstring"
					}
				]
			},
			{
				"taskname":"proofreadBestAnswerAndExtract",
				"short_task_header":"#### Task 4 - Proofread Answer",
				"version":"1.0.0",
				"type":"AITaskTemplate",
				"system_prompt":"You are a Japanese language teacher for beginners and intermediate language learning adults. Your master skill is to read the Japanese parts ('japanese','kana','romaji') and transcribe it to kana (hiragana and katakana) and for foreigners to romaji.\\n\\nREMINDER\\n* ONLY do corrections IF absolutely necessary\\n* DON'T introduce new errors while proof-reading\\n* provide a kana reading based on hiragana script\\n* USE white spaces for romaji and kana ONLY between words to help English speakers.\\n",
				"task_query":"Task: Proof-read the following given translation.",
				"task_context_template":"```json\n{{{#task3.result}}}```\\n\\nTask: Provide the proof-read version as a json structure\\n{{{#printJsonStructure:expectedFullResultStructure}}}\\n",
				"task_answer_pretext":"Answer:\\n```json\\n",
				"extra_stopwords":[],
				"inputs":[],
				"outputs":[
					{
						"target":"task4.task",
						"source":"local.model_task",
						"__datatype":"string"
					},
					{
						"target":"task4.result",
						"source":"result.llm.response.content",
						"__datatype":"jsonstring"
					}
				]
			},
			{
				"taskname":"translationRating",
				"short_task_header":"#### Task 5 - Answer rating",
				"version":"1.0.0",
				"type":"AITaskTemplate",
				"system_prompt":"You are an experienced translator between the English and Japanese Language.\\n\\nREMINDER:\\n* IF Rating is 6 OR below 6 THEN explain, how the translation can be further improved\\n* IF rating is above 7 only output the rating\\n",
				"task_query":"Task: rate the following Translation on a scale from 0-10, where 0 is the worst and 10 is the best:",
				"task_context_template":"```json\n{{{#task4.result}}}```\n",
				"task_answer_pretext":"Answer:\nRating: ",
				"extra_stopwords":["```", "\u3000\u3000\u3000","====="],
				"inputs":[],
				"outputs":[
					{
						"target":"task5.task",
						"source":"local.model_task",
						"__datatype":"string"
					},
					{
						"target":"task5.result",
						"source":"result.llm.response.content",
						"__datatype":"string"
					}
				]
			}
		]
	},
	
	"edgedata": {
		"__comment":"This describes the connections between the tasks.",
		"connections":{
			"firstShotTranslation":{
				"next":["firstShotRefiner"]
			},
			"firstShotRefiner":{
				"next":["bestAnswerAndJsonExtractor"]
			},
			"bestAnswerAndJsonExtractor":{
				"next":["proofreadBestAnswerAndExtract"]
			},
			"proofreadBestAnswerAndExtract":{
				"next":["translationRating"]
			}
		}
	},
	
	"json_data_dictionary":{
	}
	
}